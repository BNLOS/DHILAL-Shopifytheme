<section class="product-template section" data-section-type="product">
  <div class="container">
    <div class="grid grid--2">
      <!-- Product Images -->
      <div class="product__images">
        {%- if product.featured_image -%}
          <div class="product__main-image">
            <img src="{{ product.featured_image | image_url: width: 800 }}"
                 alt="{{ product.featured_image.alt | escape }}"
                 loading="eager"
                 width="800"
                 height="800">
          </div>
        {%- endif -%}

        {%- if product.images.size > 1 -%}
          <div class="product__thumbnails">
            {%- for image in product.images -%}
              <button class="product__thumb" data-image="{{ image | image_url: width: 800 }}">
                <img src="{{ image | image_url: width: 100 }}"
                     alt="{{ image.alt | escape }}"
                     loading="lazy"
                     width="100"
                     height="100">
              </button>
            {%- endfor -%}
          </div>
        {%- endif -%}
      </div>

      <!-- Product Info -->
      <div class="product__info">
        <h1 class="product__title">{{ product.title }}</h1>
        
        {%- if product.vendor -%}
          <p class="product__vendor">{{ product.vendor }}</p>
        {%- endif -%}

        <div class="product__price">
          {%- if product.compare_at_price > product.price -%}
            <span class="product__price--sale">{{ product.compare_at_price | money }}</span>
          {%- endif -%}
          <span>{{ product.price | money }}</span>
        </div>

        <form action="/cart/add" method="post" enctype="multipart/form-data" class="product-form">
          {%- unless product.has_only_default_variant -%}
            <div class="product__options">
              {%- for option in product.options_with_values -%}
                <div class="product__option">
                  <label for="Option{{ forloop.index }}">{{ option.name }}</label>
                  <select id="Option{{ forloop.index }}" name="options[{{ option.name | escape }}]">
                    {%- for value in option.values -%}
                      <option value="{{ value | escape }}"
                              {% if option.selected_value == value %}selected{% endif %}>
                        {{ value }}
                      </option>
                    {%- endfor -%}
                  </select>
                </div>
              {%- endfor -%}
            </div>
          {%- endunless -%}

          <select name="id" class="product__variants">
            {%- for variant in product.variants -%}
              <option value="{{ variant.id }}"
                      {% if variant == product.selected_or_first_available_variant %}selected{% endif %}
                      {% unless variant.available %}disabled{% endunless %}>
                {{ variant.title }}
                {%- if variant.available -%}
                  - {{ variant.price | money }}
                {%- else -%}
                  - {{ 'products.product.sold_out' | t }}
                {%- endif -%}
              </option>
            {%- endfor -%}
          </select>

          <div class="product__quantity">
            <label for="Quantity">{{ 'products.product.quantity' | t }}</label>
            <input type="number" id="Quantity" name="quantity" value="1" min="1">
          </div>

          <button type="submit" class="btn btn--large btn--full"
                  {% unless product.available %}disabled{% endunless %}>
            {%- if product.available -%}
              {{ 'products.product.add_to_cart' | t }}
            {%- else -%}
              {{ 'products.product.sold_out' | t }}
            {%- endif -%}
          </button>
        </form>

        <div class="product__description">
          {{ product.description }}
        </div>
      </div>
    </div>
  </div>
</section>